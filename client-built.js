(function(){define("bubble-chart",["d3"],function(e){var t;return t=function(){function t(t){var n=this;this.bubbles=e.shuffle(t.data),this.width=t.width,this.height=t.height,this.maxRadius=70,this.bubbleScale=e.scale.sqrt().range([0,this.maxRadius]),this.bubbleScale.domain([0,e.max(this.bubbles,function(e){return e.value})]),this.collisionPadding=4,this.minCollisionRadius=12,this.jitter=.5,this.textWidthFactor=1.9,this.bubbles.forEach(function(e){return e.radius=n.bubbleScale(e.value),e.collisionRadius=Math.max(n.minCollisionRadius,e.radius)}),this.force=e.layout.force().gravity(0).charge(0).size([this.width,this.height]).on("tick",this._calculateForceFactory())}return t.prototype.plot=function(e){return this.selector=e.selector,this._constructCanvas(),this._constructBackground(),this._constructCircles(),this._constructCaptions(),this.force.nodes(this.bubbles).start()},t.prototype.resize=function(e){return this.width=e.width,this.height=e.height,this.force.stop(),this._resize(this.canvas),this._resize(this.background),this.force.size([this.width,this.height]),this.force.start()},t.prototype._constructCanvas=function(){return this.canvas=e.select(this.selector).selectAll("svg").data([1]),this.canvas.enter().append("svg").attr("width",this.width).attr("height",this.height),this.canvas.exit().remove()},t.prototype._constructBackground=function(){return this.background=this.canvas.selectAll("rect").data([1]),this.background.enter().append("rect").attr("class","bubble-chart-background").attr("width",this.width).attr("height",this.height),this.background.exit().remove()},t.prototype._constructCircles=function(){return this.circles=this.canvas.selectAll("circle").data(this.bubbles),this.circles.enter().append("circle").attr("class","bubble-chart-bubble").attr("r",function(e){return e.radius}).call(this.force.drag),this.circles.exit().remove()},t.prototype._constructCaptions=function(){var t,n,r=this;return t=function(e){return e.replace(/\S{3}[ьаеоуюыиэeyuioa](?!$)/g,function(e){return e+"-"}).replace(/(-\S)$/,function(e){return e[1]}).replace("- "," ")},n=this.textWidthFactor,this.captions=e.select(this.selector).selectAll("div").data(this.bubbles),this.captions.enter().append("span").attr("class","bubble-chart-caption").style("font-size",function(e){return Math.max(8,r.bubbleScale(e.value/2))+"px"}).style("width",function(e){return""+n*e.radius+"px"}).text(function(e){return t(e.description)}).call(this.force.drag).each(function(e){var t;return t=this.getBoundingClientRect(),e.width=n*e.radius,e.height=t.height}),this.captions.exit().remove()},t.prototype._resize=function(e){return e.attr("width",this.width).attr("height",this.height)},t.prototype._applyGravityFactory=function(e){var t,n,r,i;return r=this.width/2,i=this.height/2,t=e/8,n=e,function(e){return e.x+=(r-e.x)*t,e.y+=(i-e.y)*n}},t.prototype._collideFactory=function(){var e=this;return function(t){return e.bubbles.forEach(function(n){var r,i,s,o,u,a;if(t===n)return;i=t.x-n.x,s=t.y-n.y,r=Math.sqrt(i*i+s*s),o=t.collisionRadius+n.collisionRadius+e.collisionPadding;if(r>=o)return;return r=(r-o)/r*e.jitter,u=i*r,a=s*r,t.x-=u,t.y-=a,n.x+=u,n.y+=a})}},t.prototype._calculateForceFactory=function(){var e=this;return function(t){var n;return n=t.alpha*.1,e.circles.each(e._applyGravityFactory(n)).each(e._collideFactory()).attr("transform",function(e){return"translate("+e.x+", "+e.y+")"}),e.captions.style("left",function(e){return""+(e.x-e.width/2)+"px"}).style("top",function(e){return""+(e.y-e.height/2)+"px"})}},t}()})}).call(this),function(){require.config({shim:{d3:{exports:"d3"},jquery:{exports:"$"}},paths:{d3:"http://cdnjs.cloudflare.com/ajax/libs/d3/3.0.8/d3.min",jquery:"http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min"}}),require(["jquery","bubble-chart"],function(e,t){var n,r,i,s;return s={AED:3.672852,AFN:53.184533,ALL:108.266999,AMD:418.173748,ANG:1.788725,AOA:96.850633,ARS:5.099019,AUD:.958859,AWG:1.790033,AZN:.7848,BAM:1.511732,BBD:2,BDT:78.358751,BGN:1.51291,BHD:.377027,BIF:1567.915,BMD:1,BND:1.249246,BOB:6.986005,BRL:2.00514,BSD:1,BTC:.014096,BTN:54.329233,BWP:8.270311,BYR:8641.856667,BZD:1.973508,CAD:1.024802,CDF:929.484026,CHF:.944334,CLF:.020675,CLP:472.670543,CNY:6.227035,COP:1819.219364,CRC:499.6213,CUP:22.682881,CVE:85.441513,CZK:19.930867,DJF:177.342625,DKK:5.759392,DOP:40.954426,DZD:79.165556,EEK:11.7331,EGP:6.797508,ETB:18.155588,EUR:.772463,FJD:1.785594,FKP:.658072,GBP:.658072,GEL:1.6584,GHS:1.941089,GIP:.625677,GMD:33.227813,GNF:7114.97625,GTQ:7.826958,GYD:202.934998,HKD:7.762712,HNL:19.690473,HRK:5.868045,HTG:42.46845,HUF:237.061817,IDR:9731.219572,ILS:3.663006,INR:54.324311,IQD:1160.08125,IRR:12270.7875,ISK:124.377501,JEP:.658072,JMD:97.325861,JOD:.708022,JPY:94.983835,KES:85.781938,KGS:47.899866,KHR:3982.68625,KMF:380.796641,KPW:900,KRW:1118.079689,KWD:.284925,KYD:.818765,KZT:150.84997,LAK:7831.25125,LBP:1503.62488,LKR:126.884577,LRD:74.333333,LSL:9.288083,LTL:2.668684,LVL:.542624,LYD:1.281213,MAD:8.584243,MDL:12.37503,MGA:2226.015,MKD:47.634703,MMK:882.68225,MNT:1404.613333,MOP:7.989138,MRO:285.45,MUR:31.155738,MVR:15.35245,MWK:385.9005,MXN:12.388824,MYR:3.114326,MZN:30.151067,NAD:9.290027,NGN:158.617189,NIO:24.514847,NOK:5.832062,NPR:86.928302,NZD:1.202047,OMR:.384941,PAB:1,PEN:2.590792,PGK:2.111017,PHP:40.836592,PKR:98.146888,PLN:3.234713,PYG:4034.855612,QAR:3.640667,RON:3.418329,RSD:86.340407,RUB:30.90375,RWF:636.978743,SAR:3.750245,SBD:7.203825,SCR:11.749395,SDG:4.411577,SEK:6.498741,SGD:1.249631,SHP:.658072,SLL:4317.586208,SOS:1583.315,SRD:3.275,STD:18987.295,SVC:8.742896,SYP:70.758067,SZL:9.298963,THB:29.253726,TJS:4.7537,TMT:2.8525,TND:1.581166,TOP:1.751205,TRY:1.817588,TTD:6.41454,TWD:29.789773,TZS:1620.513108,UAH:8.132144,UGX:2632.204486,USD:1,UYU:18.838666,UZS:2041.839972,VEF:4.295129,VND:20901.08666,VUV:92.22,WST:2.299517,XAF:507.306428,XCD:2.7018,XDR:.66495,XOF:507.573747,XPF:92.1516,YER:214.95956,ZAR:9.306956,ZMK:5232.196666,ZMW:5.296885,ZWL:322.387247},n=new t({width:e(window).innerWidth(),height:e(window).innerHeight(),data:function(){var e;e=[];for(r in s)i=s[r],e.push({description:r,value:1/i});return e}().filter(function(e){return e.value<1})}),n.plot({selector:"#chart"})})}.call(this),define("client",function(){});